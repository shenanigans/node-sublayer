<!DOCTYPE html>
<html>
<head>
    <title>substation.Action.Configuration documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../../../index.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../highlight.css" />
    <script type="text/javascript" src="../../../../../../index.js"></script>
</head>
<body class="class" id="component_1702">
    <div id="outer">
        <div id="header">
            
            
            
            
            
            <a class="ctype" href="../../../../../../index.html">class</a>
            <span></span>
            <span class="breadcrumbs">
                <span class="delimiter">:</span><a href="../../../../index.html" class="breadcrumb module">substation</a><span class="delimiter">.</span><a href="../../index.html" class="breadcrumb class">Action</a><span class="delimiter">.</span><a href="index.html" class="breadcrumb class">Configuration</a>
            </span>
        </div>
<div id="TOC">
        <div class="section">
            <h4 class="header"><a href="#statics">Static Properties</a></h4>
                <a href="#component_1647">64000</a><br />
                <a href="#component_1651">Authentication</a><br />
                <a href="#component_1660">authentication</a><br />
                <a href="#component_1654">false</a><br />
                <a href="#component_1657">true</a><br />
        </div>
        <div class="section">
            <h4 class="header"><a href="#members">Member Properties</a></h4>
                <a href="#component_1690">authentication</a><br />
                <a href="#component_1697">binaryStreams</a><br />
                <a href="#component_1693">bodySchema</a><br />
                <a href="#component_1699">bufferFiles</a><br />
                <a href="#component_1684">context</a><br />
                <a href="#component_1698">neverBuffer</a><br />
                <a href="#component_1696">querySchema</a><br />
                <a href="#component_1663">route</a><br />
        </div>
        <div class="section">
            <h4 class="header"><a href="#methods">Methods</a></h4>
                <a href="#component_1687">setup</a><br />
                <a href="#component_1681">template</a><br />
        </div>
</div>
        <div id="content">
            <!-- basic document info -->
            <div id="details">
                        <div class="markdown"><p>Configuration options for <a href="../../index.html"><code>Actions</code></a>.</p>
</div>
                <div class="clear"></div>
                    <!-- constructor function -->
            </div>
<div class="children">
        <!-- static properties -->
        <h1 id="statics" class="header">Static Properties</h1>
        <div class="section properties">
<div id="component_1647" class="child property">
    <span class="signature">
        <span>
            <span class="valsep">|</span>
            <a class="valtype" href="javascript:return false;">default</a>
            
        </span>
        
        <a class="title" href="index.html#component_1647">64000</a>
    </span>
    <div class="info">
<span class="markdown"><pre><code>Prebuffer trivial <span class="hljs-built_in">files</span> <span class="hljs-keyword">into</span> memory, up <span class="hljs-built_in">to</span> <span class="hljs-operator">the</span> given <span class="hljs-built_in">number</span> <span class="hljs-operator">of</span> <span class="hljs-keyword">bytes</span> across all uploaded <span class="hljs-built_in">files</span>.
Handy <span class="hljs-keyword">for</span> handling small <span class="hljs-built_in">file</span> uploads (such <span class="hljs-keyword">as</span> user avatars) <span class="hljs-operator">in</span> <span class="hljs-operator">an</span> application where <span class="hljs-built_in">file</span>
uploads are <span class="hljs-operator">not</span> <span class="hljs-operator">a</span> significant feature.
</code></pre><p>@member/</p>
</span>
    </div>
</div>
<div id="component_1651" class="child property">
    <span class="signature">
        <span></span>
        
        <a class="title" href="property/authentication/index.html">Authentication</a>
    </span>
    <div class="info">
<span class="markdown"></span>
    </div>
</div>
<div id="component_1660" class="child property">
    <span class="signature">
        <span></span>
        
        <a class="title" href="property/authentication_1/index.html">authentication</a>
    </span>
    <div class="info">
<span class="markdown"></span>
    </div>
</div>
<div id="component_1654" class="child property">
    <span class="signature">
        <span>
            <span class="valsep">|</span>
            <a class="valtype" href="javascript:return false;">default</a>
            
        
            <span class="valsep">|</span>
            <a class="valtype" href="javascript:return false;">default</a>
            
        
            <span class="valsep">|</span>
            <a class="valtype" href="javascript:return false;">default</a>
            
        
            <span class="valsep">|</span>
            <a class="valtype" href="javascript:return false;">default</a>
            
        </span>
        
        <a class="title" href="index.html#component_1654">false</a>
    </span>
    <div class="info">
<span class="markdown"><p>Require that the Agent be logged into the application to use access this Action.</p>
<p>Require that the Agent have same-origin access priveleges in the client context to use this
Action. This secures against XSS attacks in the browser.</p>
<p> If true, accept unknown content types and pass them, as well as <code>multipart/form-data</code> requests,
 to the Action as streams. The passed <code>request.body</code> will be a <code>ReadableStream</code> instance.</p>
<p> When <a href="javascript:return false;"><code>binaryStreams</code></a> is set and so is <code>neverBuffer</code>, the [request body]
 (.Request.body) is always a <a href="javascript:return false;"><code>stream</code></a>.</p>
</span>
    </div>
</div>
<div id="component_1657" class="child property">
    <span class="signature">
        <span>
            <span class="valsep">|</span>
            <a class="valtype" href="javascript:return false;">default</a>
            
        </span>
        
        <a class="title" href="index.html#component_1657">true</a>
    </span>
    <div class="info">
<span class="markdown"><p>Requires that an Agent be at least an Idle Agent to use this Action. An Idle Agent is one
that presents an expired session token. It is possible for an Idle Agent to be Domestic.</p>
</span>
    </div>
</div>
        </div>
        <!-- member properties -->
        <h1 id="members" class="header">Member Properties</h1>
        <div class="section members">
<div id="component_1690" class="child member">
    <span class="signature">
        <span>
            <span class="valsep">|</span>
            <a class="valtype" href="javascript:return false;">JSON</a>
            
        
            <span class="valsep">|</span>
            <a class="valtype" href="javascript:return false;">JSON</a>
            
        </span>
        
        <a class="title" href="index.html#component_1690">authentication</a>
    </span>
    <div class="info">
<span class="markdown"><p>Specify a minimum authentication profile to access this Action. Unauthenticated requests are
automatically served a blank 403 response.</p>
</span>
    </div>
</div>
<div id="component_1697" class="child member">
    <span class="signature">
        <span>
            <span class="valsep">|</span>
            <a class="valtype" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a>
            
        </span>
        
        <a class="title" href="index.html#component_1697">binaryStreams</a>
    </span>
    <div class="info">
<span class="markdown"></span>
    </div>
</div>
<div id="component_1693" class="child member">
    <span class="signature">
        <span>
            <span class="valsep">|</span>
            <a class="valtype" href="../../../../../../property/object/index.html">Object</a>
            
        </span>
        
        <a class="title" href="index.html#component_1693">bodySchema</a>
    </span>
    <div class="info">
<span class="markdown"><p>A JSON Schema document used to restrict request body content. filth form requests are mapped
to simple flat Objects and JSON bodies are validated as-are. Failure to validate will cause a
<code>406</code> response to be automatically sent. When <code>bodySchema</code> is present, an Action&#39;s
<code>request.body</code> can always be assumed to conform. Finally, the parent server will automatically
respond to OPTIONS requests with <code>{ VERB:{ body:bodySchema, query:querySchema }, ...</code>.</p>
<p>Schemata are pre-compiled with <a href="https://github.com/shenanigans/node-likeness">likeness</a> for
rapid validation. This allows <code>$ref</code> to validate much more quickly, however, it will load
references when the server starts and does not keep them up to date (yet).</p>
</span>
    </div>
</div>
<div id="component_1699" class="child member">
    <span class="signature">
        <span>
            <span class="valsep">|</span>
            <a class="valtype" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a>
            
        </span>
        
        <a class="title" href="index.html#component_1699">bufferFiles</a>
    </span>
    <div class="info">
<span class="markdown"></span>
    </div>
</div>
<div id="component_1684" class="child member">
    <span class="signature">
        <span>
            <span class="valsep">|</span>
            <a class="valtype" href="../../../../../../property/object/index.html">Object</a>
            
        
            <span class="valsep">|</span>
            <a class="valtype" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a>
            
        </span>
        
        <a class="title" href="index.html#component_1684">context</a>
    </span>
    <div class="info">
<span class="markdown"><p>When generating html with a template but never when generating a JSON response, <a href="javascript:return false;"><code>response
content</code></a> is non-destructively deep-merged over this Object. To put
it another way, <code>context</code> sets default content for html pages.</p>
</span>
    </div>
</div>
<div id="component_1698" class="child member">
    <span class="signature">
        <span>
            <span class="valsep">|</span>
            <a class="valtype" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a>
            
        </span>
        
        <a class="title" href="index.html#component_1698">neverBuffer</a>
    </span>
    <div class="info">
<span class="markdown"></span>
    </div>
</div>
<div id="component_1696" class="child member">
    <span class="signature">
        <span>
            <span class="valsep">|</span>
            <a class="valtype" href="../../../../../../property/object/index.html">Object</a>
            
        </span>
        
        <a class="title" href="index.html#component_1696">querySchema</a>
    </span>
    <div class="info">
<span class="markdown"><p>A JSON Schema document used to restrict request url query terms. The query is mapped as a simple
flat Object and the field <code>_domestic</code> is automatically stripped before validation. Failure to
validate will cause a <code>406</code> response to be automatically sent. When <code>querySchema</code> is present, an
Action&#39;s <code>request.query</code> can always be assumed to conform. The parent server will automatically
respond to OPTIONS requests with <code>{ VERB:{ body:bodySchema, query:querySchema }, ...</code>.</p>
<p>Schemata are pre-compiled with <a href="https://github.com/shenanigans/node-likeness">likeness</a> for
rapid validation. This allows <code>$ref</code> to validate much more quickly, however, it will load
references when the server starts and does not keep them up to date (yet).</p>
</span>
    </div>
</div>
<div id="component_1663" class="child member">
    <span class="signature">
        <span>
            <span class="valsep">|</span>
            <a class="valtype" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>
            
        
            <span class="valsep">|</span>
            <a class="valtype" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp">RegExp</a>
            
        
            <span class="valsep">|</span>
            <a class="valtype" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a>
            
        </span>
        
        <a class="title" href="index.html#component_1663">route</a>
    </span>
    <div class="info">
<span class="markdown"><p>As an alternative to setting the route <a href="../../../../member/addaction/index.html"><code>when activating the Action</code></a> you
may set it in the configuration. Routes specified in <code>addAction</code> override configured routes.</p>
<p>When a route is set as a String, it is prepended with a forward slash if none is present and
converted to a regular expression of the form <code>/pathname(?:/(.*))?</code>.</p>
</span>
    </div>
</div>
        </div>
        <!-- methods -->
        <h1 id="methods" class="header">Methods</h1>
        <div class="section members">
<div id="component_1687" class="child function">
    <span class="signature">
        <span></span>
        <a href="index.html#component_1687" class="title">
            setup
        </a>
        (
            <span></span>
        ) {
    </span>
    <div class="info">
        <span class="markdown"><p>Called during the parent server&#39;s initialization stage, before the server has begun accepting
requests. It&#39;s usually the best time to establish database access. Two arguments are passed:</p>
<ul>
<li><a href="../../../../../../property/object/index.html"><code>Object</code></a> <code>configuration</code> The Action&#39;s configuration Object. You may still edit the
 configuration at this point.</li>
<li><a href="../../../../../../property/function/index.html"><code>Function</code></a> <code>callback</code> Call when the Action is ready to use.</li>
</ul>
</span>
        <div class="tail" /></div>
    </div>
</div>
<div id="component_1681" class="child function">
    <span class="signature">
        <span></span>
        <a href="member/template/index.html" class="title">
            template
        </a>
        (
            <span></span>
        ) {
    </span>
    <div class="info">
        <span class="markdown"><p>Define one or more template Functions to convert a context Object to an html string. If a
Function is used, all html responses are generated by this Function. If an Object is provided,
http response codes are mapped to templates. If a response code cannot be matched exactly, it
falls back to the <code>200</code> template, then attemps an exact match and finally the <code>200</code> template on
the <a href="javascript:return false;"><code>global templates</code></a>.</p>
<p>Template Functions may be synchronous or asynchronous. The context Object and a callback
Function are passed as arguments.</p>
<p>When a client uses this Action over the REST transport, a template will be executed if it is
supplied. Specify either a single template Function or a map of response codes to template
Functions. Wildcards may be used i.e. &quot;2xx&quot; or &quot;30x&quot;. Most specific response code wins.</p>
</span>
        <div class="tail" /></div>
    </div>
</div>
        </div>
</div>
        </div>
    </div>
    <div id="footer">
        This document was generated with
        <a href="https://github.com/shenanigans/node-doczar">doczar</a>
        at <span class="time">2:20pm</span> on <span class="date">8/11/2015</span>
    </div>
</body>
</html>
